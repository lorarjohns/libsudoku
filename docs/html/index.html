<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libsudoku: libsudoku</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libsudoku
   </div>
   <div id="projectbrief">Simple Sudoku Solver library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">libsudoku </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>libsudoku is a small library for solving sudoku puzzles. It has both C and C++14 interfaces, and is implemented in C++14 using <a href="https://github.com/ericniebler/range-v3/">Range-V3</a>.</p>
<h2>Building</h2>
<h3>GCC and Clang</h3>
<p>Building the library requires a C++14 compiler with implementations of <code>std::experimental::optional</code> and <code>std::experimental::string_view</code>, capable of handling Range-V3 code.</p>
<p>You'll need to set the CMake configuration variable <code>RANGE_V3_INCLUDE_DIRS</code> to point to the <code>include</code> directory of a Range-V3 checkout (unless you have the headers installed in a system location such as <code>/usr/include</code> or <code>/usr/local/include</code>, in which case it should be picked up automatically). You can do this by providing the <code>-D</code> switch to CMake on the command line, for example</p>
<div class="fragment"><div class="line">$ mkdir build</div><div class="line">$ cd build</div><div class="line">$ cmake .. -DRANGE_V3_INCLUDE_DIRS=/path/to/range/v3/include</div><div class="line">$ cmake --build ..</div></div><!-- fragment --><h3>Visual Studio</h3>
<p>Building on Windows requires <a href="https://www.visualstudio.com/vs/visual-studio-2017-rc/">Visual Studio 2017</a>. You can use the version of Range-V3 provided by <a href="https://github.com/Microsoft/vcpkg/">vcpkg</a>, though you'll still need to set the <code>RANGE_V3_INCLUDE_DIRS</code> CMake variable as specified above.</p>
<p>Note that at present we only build a static library. A shared library option will be enabled once I've figured out the necessary export macros on Windows.</p>
<h2>Usage</h2>
<p>The library has two very similar APIs, one for C++ and one for C. The C++ API requires either a recent GCC or Clang, or MSVC 2017. The C API should be compatible with everything back to the stone age, although you'll still need to link with the C++ standard library.</p>
<h3>C++</h3>
<p>To use the C++ API, <code>#include &lt;<a class="el" href="sudoku_8hpp.html">tcb/sudoku.hpp</a>&gt;</code>.</p>
<p>The C++ API uses a single type, <code><a class="el" href="classtcb_1_1sudoku_1_1grid.html" title="A class representing a sudoku grid. ">tcb::sudoku::grid</a></code>, representing a (solved or unsolved) 9x9 sudoku board. A <code>grid</code> is immutable once created, and otherwise behaves as a regular type (that is, it can be copied, moved etc freely). You can default construct an empty board, which isn't very useful, but otherwise to create one you need to use the <code><a class="el" href="group__cpp__api.html#gae45f6023fc262695ccf49f4cf10af16e" title="Parse a string to create a new grid. ">tcb::sudoku::grid::parse()</a></code> static method, which has two overloads. The first takes a <code>string_view</code> and the second a <code>std::istream</code>. In either case, <code>parse()</code> will return an <code>optional&lt;grid&gt;</code>.</p>
<p>The parser looks for characters in the range <code>[1-9]</code>, interpreting them as known squares on the sudoku board. Unknown squares can be represented as <code>0</code> or <code>.</code>. All other characters are ignored. If 81 valid characters (i.e. a full board) are read successfully, an engaged <code>optional</code> containing a <code>grid</code> is returned, and otherwise an empty <code>optional</code>. <b>Always check the return value of <code>parse()</code>!</b> Note that the parser doesn't check to ensure that you have provided a valid sudoku puzzle (i.e. there may be contradicting positions in the input), but invalid boards will not be able to be solved.</p>
<p>As mentioned above, <code>grid</code>s are regular types, so you can copy them, move them, compare them for equality, sort them and even <code>std::hash</code> them. You can also iterate over the 81 contained characters using the normal standard library <code>begin()</code> and <code>end()</code> functions.</p>
<p>To convert a <code>grid</code> to a string, use the <code><a class="el" href="group__cpp__api.html#gaf8dfca59b7cdc366a9255fbd6c9eb5f2" title="Returns a string (well, string_view) representation of the given grid. ">tcb::sudoku::to_string()</a></code> function (which actually returns a <code>string_view</code>). You can pretty-print a grid using the normal stream operator; for example</p>
<div class="fragment"><div class="line"><span class="comment">// This is on two lines just to stop line wrapping in the README</span></div><div class="line"><span class="comment">// You can of course pass the string literal directly to parse()</span></div><div class="line"><span class="keyword">const</span> <span class="keyword">auto</span> str = <span class="stringliteral">&quot;......52..8.4......3...9...5.1...6..2..7........3.....6...1..........7.4.......3.&quot;</span>;</div><div class="line"><span class="keyword">const</span> <span class="keyword">auto</span> grid = <a class="code" href="group__cpp__api.html#gae45f6023fc262695ccf49f4cf10af16e">tcb::sudoku::grid::parse</a>(str);</div><div class="line"><span class="keywordflow">if</span> (grid) {</div><div class="line">    std::cout &lt;&lt; grid.value() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div><div class="line">}</div></div><!-- fragment --><p>prints</p>
<div class="fragment"><div class="line">. . . | . . . | 5 2 .</div><div class="line">. 8 . | 4 . . | . . .</div><div class="line">. 3 . | . . 9 | . . .</div><div class="line">------+-------+------</div><div class="line">5 . 1 | . . . | 6 . .</div><div class="line">2 . . | 7 . . | . . .</div><div class="line">. . . | 3 . . | . . .</div><div class="line">------+-------+------</div><div class="line">6 . . | . 1 . | . . .</div><div class="line">. . . | . . . | 7 . 4</div><div class="line">. . . | . . . | . 3 .</div></div><!-- fragment --><p>To print the compact representation, use <code>std::cout &lt;&lt; to_string(grid)</code>:</p>
<div class="fragment"><div class="line">......52..8.4......3...9...5.1...6..2..7........3.....6...1..........7.4.......3.</div></div><!-- fragment --><p>To solve a puzzle, simply use the <code><a class="el" href="group__cpp__api.html#gac36b954c1f0a8470a345453192fa9ad1" title="Attempts to solve the given grid. ">tcb::sudoku::solve()</a></code> function. If the solve was successful, the result will be an <code>optional</code> containing a completed <code>grid</code>. If the solver could not find a solution (for example if the input grid contained contradicting positions), an empty <code>optional</code> will be returned. For example:</p>
<div class="fragment"><div class="line"><span class="keyword">auto</span> str = <span class="stringliteral">&quot;......52..8.4......3...9...5.1...6..2..7........3.....6...1..........7.4.......3.&quot;</span>s;</div><div class="line"><span class="keyword">auto</span> grid = <a class="code" href="group__cpp__api.html#gae45f6023fc262695ccf49f4cf10af16e">tcb::sudoku::grid::parse</a>(str);</div><div class="line"></div><div class="line"><span class="keyword">auto</span> result = <a class="code" href="group__cpp__api.html#gac36b954c1f0a8470a345453192fa9ad1">tcb::sudoku::solve</a>(*grid);</div><div class="line"></div><div class="line"><span class="keywordflow">if</span> (result) {</div><div class="line">    std::cout &lt;&lt; *result &lt;&lt; <span class="charliteral">&#39;\n&#39;</span></div><div class="line">} <span class="keywordflow">else</span> {</div><div class="line">    std::cout &lt;&lt; <span class="stringliteral">&quot;Could not find a solution\n&quot;</span>;</div><div class="line">}</div></div><!-- fragment --><h3>C</h3>
<p>To use the C API, <code>#include &lt;<a class="el" href="sudoku_8h.html">tcb/sudoku.h</a>&gt;</code>.</p>
<p>As in C++, the library uses one basic type, <code>SudokuGrid</code>. This is an opaque type which can be passed around by pointer. To create a grid, use <code><a class="el" href="group__c__api.html#gae0a5f2f6a022923104f874d7d071dd8f" title="Parse a null-terminated string to create a new grid. ">sudoku_grid_parse()</a></code>, which takes a null-terminated string containing a puzzle. This will return a <code>SudokuGrid*</code> containing the grid, or <code>NULL</code> on failure. After use, you need to free the grid with <code><a class="el" href="group__c__api.html#ga30a9fcf97b14d008597c8f50821152ae" title="Frees a grid created with sudoku_grid_parse() or sudoku_grid_solve() ">sudoku_grid_free()</a></code>. For example:</p>
<div class="fragment"><div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span>* puzzle = <span class="stringliteral">&quot;......52..8.4......3...9...5.1...6..2..7........3.....6...1..........7.4.......3.&quot;</span>;</div><div class="line"><a class="code" href="group__c__api.html#ga9f0c547654f3c2339c68a212ef31c537">SudokuGrid</a> *grid = <a class="code" href="group__c__api.html#gae0a5f2f6a022923104f874d7d071dd8f">sudoku_grid_parse</a>(puzzle);</div><div class="line"><span class="comment">/* ... do something with grid ... */</span></div><div class="line"><a class="code" href="group__c__api.html#ga30a9fcf97b14d008597c8f50821152ae">sudoku_grid_free</a>(grid);</div></div><!-- fragment --><p>You can use <code><a class="el" href="group__c__api.html#gabbe12cc914014c8e5cdfd944dbe07d49" title="Pretty-prints a grid to stdout. ">sudoku_grid_pretty_print()</a></code> to pretty-print a grid to <code>stdout</code>; the format is the same as shown for C++. To pretty-print a grid elsewhere, use <code><a class="el" href="group__c__api.html#ga2808072f5727d99ed9bd2b70d617cde9" title="Pretty-prints a grid to stream. ">sudoku_grid_pretty_fprint()</a></code> and pass a <code>FILE*</code>, for example</p>
<div class="fragment"><div class="line"><a class="code" href="group__c__api.html#ga9f0c547654f3c2339c68a212ef31c537">SudokuGrid</a> *grid = <a class="code" href="group__c__api.html#gae0a5f2f6a022923104f874d7d071dd8f">sudoku_grid_parse</a>(...);</div><div class="line">FILE *file = fopen(<span class="stringliteral">&quot;/path/to/file&quot;</span>, <span class="stringliteral">&quot;w&quot;</span>);</div><div class="line"><a class="code" href="group__c__api.html#ga2808072f5727d99ed9bd2b70d617cde9">sudoku_grid_pretty_fprint</a>(file, grid);</div></div><!-- fragment --><p>A compact representation of the grid can be obtained by using <code><a class="el" href="group__c__api.html#ga91ba0b9e2a48a4fe74bf7cf6f15568ec" title="Returns a string representation of grid. ">sudoku_grid_to_string()</a></code>. You must not <code>free()</code> the resulting string.</p>
<p>To solve a grid, pass it to the <code><a class="el" href="group__c__api.html#ga64ed03b87020033521cefa0081ac7a59" title="Attempts to solve the given grid. ">sudoku_solve()</a></code> function. If successul, this will return a new <code>SudokuGrid*</code> containing the solution, or <code>NULL</code> on failure. For example:</p>
<div class="fragment"><div class="line"><a class="code" href="group__c__api.html#ga9f0c547654f3c2339c68a212ef31c537">SudokuGrid</a> *grid = NULL, *solution = NULL;</div><div class="line"></div><div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span>* puzzle = <span class="stringliteral">&quot;......52..8.4......3...9...5.1...6..2..7........3.....6...1..........7.4.......3.&quot;</span>;</div><div class="line">grid = <a class="code" href="group__c__api.html#gae0a5f2f6a022923104f874d7d071dd8f">sudoku_grid_parse</a>(puzzle);</div><div class="line"><span class="keywordflow">if</span> (!grid) {</div><div class="line">    printf(<span class="stringliteral">&quot;Error reading grid\n&quot;</span>);</div><div class="line">    exit(-1);</div><div class="line">}</div><div class="line"></div><div class="line">solution = <a class="code" href="group__c__api.html#ga64ed03b87020033521cefa0081ac7a59">sudoku_solve</a>(grid);</div><div class="line"><span class="keywordflow">if</span> (solution) {</div><div class="line">    <a class="code" href="group__c__api.html#gabbe12cc914014c8e5cdfd944dbe07d49">sudoku_grid_pretty_print</a>(solution);</div><div class="line">} <span class="keywordflow">else</span> {</div><div class="line">    printf(<span class="stringliteral">&quot;Could not find a solution\n&quot;</span>);</div><div class="line"></div><div class="line">}</div><div class="line"></div><div class="line"><a class="code" href="group__c__api.html#ga30a9fcf97b14d008597c8f50821152ae">sudoku_grid_free</a>(solution);</div><div class="line"><a class="code" href="group__c__api.html#ga30a9fcf97b14d008597c8f50821152ae">sudoku_grid_free</a>(grid);</div></div><!-- fragment --> <h2>Licence</h2>
<p>This library is released under the MIT licence. See LICENCE.txt for full details. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
